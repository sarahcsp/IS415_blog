<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Take Home Assignment 3</title>

  <meta property="description" itemprop="description" content="In this Take Home Assignment, we will build hedonic pricing models to explain factors affecting the resale prices of public housing in Singapore. The hedonic price models must be built by using appropriate GWR methods."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-10-21"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-10-21"/>
  <meta name="article:author" content="Sarah Chin"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Take Home Assignment 3"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="In this Take Home Assignment, we will build hedonic pricing models to explain factors affecting the resale prices of public housing in Singapore. The hedonic price models must be built by using appropriate GWR methods."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Take Home Assignment 3"/>
  <meta property="twitter:description" content="In this Take Home Assignment, we will build hedonic pricing models to explain factors affecting the resale prices of public housing in Singapore. The hedonic price models must be built by using appropriate GWR methods."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Take Home Assignment 3"]},{"type":"character","attributes":{},"value":["In this Take Home Assignment, we will build hedonic pricing models to explain factors affecting the resale prices of public housing in Singapore. The hedonic price models must be built by using appropriate GWR methods. \n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Sarah Chin"]},{"type":"character","attributes":{},"value":["linkedin.com/in/sarahchin99/"]}]}]},{"type":"character","attributes":{},"value":["10-21-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/aspatial/resale-flat-prices/metadata-resale-flat-prices.txt","data/aspatial/resale-flat-prices/resale-flat-prices-based-on-approval-date-1990-1999.csv","data/aspatial/resale-flat-prices/resale-flat-prices-based-on-approval-date-2000-feb-2012.csv","data/aspatial/resale-flat-prices/resale-flat-prices-based-on-registration-date-from-jan-2015-to-dec-2016.csv","data/aspatial/resale-flat-prices/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv","data/aspatial/resale-flat-prices/resale-flat-prices-based-on-registration-date-from-mar-2012-to-dec-2014.csv","data/eldercare-services.zip","data/geospatial/MP14_SUBZONE_WEB_PL.dbf","data/geospatial/MP14_SUBZONE_WEB_PL.prj","data/geospatial/MP14_SUBZONE_WEB_PL.sbn","data/geospatial/MP14_SUBZONE_WEB_PL.sbx","data/geospatial/MP14_SUBZONE_WEB_PL.shp","data/geospatial/MP14_SUBZONE_WEB_PL.shp.xml","data/geospatial/MP14_SUBZONE_WEB_PL.shx","data/locational/chas/CHAS.rds","data/locational/childcare/CHILDCARE.cpg","data/locational/childcare/CHILDCARE.dbf","data/locational/childcare/CHILDCARE.prj","data/locational/childcare/CHILDCARE.qpj","data/locational/childcare/CHILDCARE.shp","data/locational/childcare/CHILDCARE.shx","data/locational/eldercare/ELDERCARE.dbf","data/locational/eldercare/ELDERCARE.prj","data/locational/eldercare/ELDERCARE.sbn","data/locational/eldercare/ELDERCARE.sbx","data/locational/eldercare/ELDERCARE.shp","data/locational/eldercare/ELDERCARE.shp.xml","data/locational/eldercare/ELDERCARE.shx","data/locational/mrt/MRTLRTStnPtt.CPG","data/locational/mrt/MRTLRTStnPtt.dbf","data/locational/mrt/MRTLRTStnPtt.prj","data/locational/mrt/MRTLRTStnPtt.sbn","data/locational/mrt/MRTLRTStnPtt.sbx","data/locational/mrt/MRTLRTStnPtt.shp","data/locational/mrt/MRTLRTStnPtt.shx","data/locational/preschools/pre-schools-location-geojson.geojson","data/locational/preschools/pre-schools-location-kml.kml","data/resale-flat-prices.zip","take-home-assignment-3_files/anchor-4.2.2/anchor.min.js","take-home-assignment-3_files/bowser-1.9.3/bowser.min.js","take-home-assignment-3_files/distill-2.2.21/template.v2.js","take-home-assignment-3_files/figure-html5/unnamed-chunk-14-1.png","take-home-assignment-3_files/figure-html5/unnamed-chunk-17-1.png","take-home-assignment-3_files/header-attrs-2.11/header-attrs.js","take-home-assignment-3_files/jquery-3.6.0/jquery-3.6.0.js","take-home-assignment-3_files/jquery-3.6.0/jquery-3.6.0.min.js","take-home-assignment-3_files/jquery-3.6.0/jquery-3.6.0.min.map","take-home-assignment-3_files/popper-2.6.0/popper.min.js","take-home-assignment-3_files/tippy-6.2.7/tippy-bundle.umd.min.js","take-home-assignment-3_files/tippy-6.2.7/tippy-light-border.css","take-home-assignment-3_files/tippy-6.2.7/tippy.css","take-home-assignment-3_files/tippy-6.2.7/tippy.umd.min.js","take-home-assignment-3_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="take-home-assignment-3_files/header-attrs-2.11/header-attrs.js"></script>
  <script src="take-home-assignment-3_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="take-home-assignment-3_files/popper-2.6.0/popper.min.js"></script>
  <link href="take-home-assignment-3_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="take-home-assignment-3_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="take-home-assignment-3_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="take-home-assignment-3_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="take-home-assignment-3_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="take-home-assignment-3_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="take-home-assignment-3_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take Home Assignment 3","description":"In this Take Home Assignment, we will build hedonic pricing models to explain factors affecting the resale prices of public housing in Singapore. The hedonic price models must be built by using appropriate GWR methods.","authors":[{"author":"Sarah Chin","authorURL":"linkedin.com/in/sarahchin99/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-10-21T00:00:00.000+08:00","citationText":"Chin, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take Home Assignment 3</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>In this Take Home Assignment, we will build hedonic pricing models to explain factors affecting the resale prices of public housing in Singapore. The hedonic price models must be built by using appropriate GWR methods.</p></p>
</div>

<div class="d-byline">
  Sarah Chin linkedin.com/in/sarahchin99/ 
  
<br/>10-21-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#overview">1. Overview</a></li>
<li><a href="#installing-and-loading-the-packages">2. Installing and Loading the packages</a></li>
<li><a href="#importing-the-geospatial-and-aspatial-data">3. Importing the Geospatial and Aspatial data</a>
<ul>
<li><a href="#importing-geospatial-data">Importing Geospatial Data</a></li>
<li><a href="#importing-aspatial-data">Importing Aspatial Data</a></li>
<li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
</ul></li>
<li><a href="#hedonic-pricing-model">4. Hedonic Pricing Model</a>
<ul>
<li><a href="#simple-linear-regression-model">Simple Linear Regression Model</a></li>
<li><a href="#multiple-linear-regression-model">Multiple Linear Regression Model</a></li>
</ul></li>
</ul>
</nav>
</div>
<h1 id="overview">1. Overview</h1>
<p>Housing is an essential component of household wealth worldwide. Buying a housing have always been a major investment in people’s lives. The price of housing are affected by many factors. These factors can be further divided to structural and locational factors. We will be using the Hedonic pricing model to examine the effect of housing factors. In this assignment, we will be using Geographical Weighted Regression (GWR) to calibrate the hedonic price model for housing.</p>
<h1 id="installing-and-loading-the-packages">2. Installing and Loading the packages</h1>
<p>Before we start importing our data, we would first need to prepare the environment.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'olsrr'</span>, <span class='st'>'corrplot'</span>, <span class='st'>'ggpubr'</span>, <span class='st'>'sf'</span>, <span class='st'>'spdep'</span>, <span class='st'>'GWmodel'</span>, <span class='st'>'tmap'</span>, <span class='st'>'tidyverse'</span>, <span class='st'>'httr'</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>,character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h1 id="importing-the-geospatial-and-aspatial-data">3. Importing the Geospatial and Aspatial data</h1>
<h2 id="importing-geospatial-data">Importing Geospatial Data</h2>
<p>We will be using <em>MP14_SUBZONE_WEB_PL</em>, which consists of URA Master Plan 2014’s planning subzone boundaries. Polygon features are used to represent these geographic boundaries. The GIS data is in svy21 projected coordinates systems.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz</span> <span class='op'>=</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/geospatial"</span>, layer <span class='op'>=</span> <span class='st'>"MP14_SUBZONE_WEB_PL"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `MP14_SUBZONE_WEB_PL&#39; from data source 
  `D:\sarahcsp\IS415_blog\_posts\2021-10-21-take-home-assignment-3\data\geospatial&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 323 features and 15 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33
Projected CRS: SVY21</code></pre>
</div>
<p>After importing the data, we will proceed to update its CRS information. The following code will update <em>mpsz</em> to the correct ESPG code.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mpsz_svy21</span> <span class='op'>&lt;-</span> <span class='fu'>st_transform</span><span class='op'>(</span><span class='va'>mpsz</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="importing-aspatial-data">Importing Aspatial Data</h2>
<p>For aspatial data, we will import the <em>resale-flat-prices-based-on-registration-date-from-jan-2017-onwards</em> csv file since we will be focusing on 1st January 2019 to 30th September 2020.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale</span> <span class='op'>=</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/aspatial/resale-flat-prices/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Since we will only be analysing Jan 2019 to Sep 2020 and four-room, we will remove the irrelevant rows. We will be using the following code to do so.</p>
<p><em>Keeping only Jan 2019 to Sep 2020:</em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale</span> <span class='op'>&lt;-</span> <span class='va'>flat_resale</span><span class='op'>[</span><span class='va'>flat_resale</span><span class='op'>[[</span><span class='st'>"month"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&gt;=</span> <span class='st'>"2019-01"</span>,<span class='op'>]</span>
<span class='va'>flat_resale</span> <span class='op'>&lt;-</span> <span class='va'>flat_resale</span><span class='op'>[</span><span class='va'>flat_resale</span><span class='op'>[[</span><span class='st'>"month"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;=</span> <span class='st'>"2020-09"</span>,<span class='op'>]</span>
</code></pre>
</div>
</div>
<p><em>Keeping only 4 Room:</em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale</span> <span class='op'>&lt;-</span> <span class='va'>flat_resale</span><span class='op'>[</span><span class='va'>flat_resale</span><span class='op'>[[</span><span class='st'>"flat_type"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>==</span> <span class='st'>"4 ROOM"</span>,<span class='op'>]</span>
</code></pre>
</div>
</div>
<p>As we can see from the <em>flat_resale</em> dataset, there are no coordinates available. This means that we must use the <em>OneMap API</em> in order to geocode our dataset and give them the correct coordinates. However, before we can geocode the dataset, we must concatenate <em>block</em> and <em>street_name</em> to get a unique address to geocode it more accurately.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale</span><span class='op'>$</span><span class='va'>address</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>flat_resale</span><span class='op'>$</span><span class='va'>block</span>, <span class='va'>flat_resale</span><span class='op'>$</span><span class='va'>street_name</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now that we have established our addresses under the column, <em>address</em> in the <em>flat_resale</em> dataset, we can proceed to use the <em>OneMap API</em> to geocode our dataset.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>getHTTPResponse</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>blockNumber</span>,<span class='va'>streetName</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>basePath</span> <span class='op'>&lt;-</span> <span class='st'>"https://developers.onemap.sg/commonapi/"</span>
  <span class='va'>pathHead</span> <span class='op'>&lt;-</span> <span class='st'>"search?searchVal="</span>
  <span class='va'>pathTail</span> <span class='op'>&lt;-</span> <span class='st'>"&amp;returnGeom=Y&amp;getAddrDetails=N"</span>
  <span class='va'>addr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>blockNumber</span>,<span class='va'>streetName</span><span class='op'>)</span>
  <span class='va'>addr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>" "</span>, <span class='st'>"+"</span>, <span class='va'>addr</span>, fixed <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
  <span class='va'>url</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>basePath</span>, <span class='va'>pathHead</span>, <span class='va'>addr</span> , <span class='va'>pathTail</span> , sep<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span>
  <span class='fu'>GET</span><span class='op'>(</span><span class='va'>url</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale</span><span class='op'>$</span><span class='va'>lat</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>
<span class='va'>flat_resale</span><span class='op'>$</span><span class='va'>lng</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>

<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>flat_resale</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'><a href='https://rdrr.io/r/base/Arithmetic.html'>%%</a></span> <span class='fl'>100</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Obtained"</span>,<span class='va'>i</span>,<span class='st'>"out of"</span>,<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>flat_resale</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>data</span> <span class='op'>&lt;-</span> <span class='va'>flat_resale</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span>
  <span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'>getHTTPResponse</span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>block</span>,<span class='va'>data</span><span class='op'>$</span><span class='st'>"street_name"</span><span class='op'>)</span>
  <span class='va'>result</span> <span class='op'>&lt;-</span> <span class='fu'>content</span><span class='op'>(</span><span class='va'>resp</span><span class='op'>)</span>

  <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>result</span><span class='op'>$</span><span class='va'>results</span><span class='op'>)</span><span class='op'>!=</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>{</span>
      <span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='va'>result</span><span class='op'>$</span><span class='va'>results</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
      <span class='va'>flat_resale</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span><span class='op'>$</span><span class='va'>lat</span> <span class='op'>&lt;-</span> <span class='va'>resp</span><span class='op'>$</span><span class='va'>LATITUDE</span>
      <span class='va'>flat_resale</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span><span class='op'>$</span><span class='va'>lng</span> <span class='op'>&lt;-</span> <span class='va'>resp</span><span class='op'>$</span><span class='va'>LONGITUDE</span>
  <span class='op'>}</span>
<span class='op'>}</span>
</code></pre>
</div>
<pre><code>[1] &quot;Obtained 100 out of 15901&quot;
[1] &quot;Obtained 200 out of 15901&quot;
[1] &quot;Obtained 300 out of 15901&quot;
[1] &quot;Obtained 400 out of 15901&quot;
[1] &quot;Obtained 500 out of 15901&quot;
[1] &quot;Obtained 600 out of 15901&quot;
[1] &quot;Obtained 700 out of 15901&quot;
[1] &quot;Obtained 800 out of 15901&quot;
[1] &quot;Obtained 900 out of 15901&quot;
[1] &quot;Obtained 1000 out of 15901&quot;
[1] &quot;Obtained 1100 out of 15901&quot;
[1] &quot;Obtained 1200 out of 15901&quot;
[1] &quot;Obtained 1300 out of 15901&quot;
[1] &quot;Obtained 1400 out of 15901&quot;
[1] &quot;Obtained 1500 out of 15901&quot;
[1] &quot;Obtained 1600 out of 15901&quot;
[1] &quot;Obtained 1700 out of 15901&quot;
[1] &quot;Obtained 1800 out of 15901&quot;
[1] &quot;Obtained 1900 out of 15901&quot;
[1] &quot;Obtained 2000 out of 15901&quot;
[1] &quot;Obtained 2100 out of 15901&quot;
[1] &quot;Obtained 2200 out of 15901&quot;
[1] &quot;Obtained 2300 out of 15901&quot;
[1] &quot;Obtained 2400 out of 15901&quot;
[1] &quot;Obtained 2500 out of 15901&quot;
[1] &quot;Obtained 2600 out of 15901&quot;
[1] &quot;Obtained 2700 out of 15901&quot;
[1] &quot;Obtained 2800 out of 15901&quot;
[1] &quot;Obtained 2900 out of 15901&quot;
[1] &quot;Obtained 3000 out of 15901&quot;
[1] &quot;Obtained 3100 out of 15901&quot;
[1] &quot;Obtained 3200 out of 15901&quot;
[1] &quot;Obtained 3300 out of 15901&quot;
[1] &quot;Obtained 3400 out of 15901&quot;
[1] &quot;Obtained 3500 out of 15901&quot;
[1] &quot;Obtained 3600 out of 15901&quot;
[1] &quot;Obtained 3700 out of 15901&quot;
[1] &quot;Obtained 3800 out of 15901&quot;
[1] &quot;Obtained 3900 out of 15901&quot;
[1] &quot;Obtained 4000 out of 15901&quot;
[1] &quot;Obtained 4100 out of 15901&quot;
[1] &quot;Obtained 4200 out of 15901&quot;
[1] &quot;Obtained 4300 out of 15901&quot;
[1] &quot;Obtained 4400 out of 15901&quot;
[1] &quot;Obtained 4500 out of 15901&quot;
[1] &quot;Obtained 4600 out of 15901&quot;
[1] &quot;Obtained 4700 out of 15901&quot;
[1] &quot;Obtained 4800 out of 15901&quot;
[1] &quot;Obtained 4900 out of 15901&quot;
[1] &quot;Obtained 5000 out of 15901&quot;
[1] &quot;Obtained 5100 out of 15901&quot;
[1] &quot;Obtained 5200 out of 15901&quot;
[1] &quot;Obtained 5300 out of 15901&quot;
[1] &quot;Obtained 5400 out of 15901&quot;
[1] &quot;Obtained 5500 out of 15901&quot;
[1] &quot;Obtained 5600 out of 15901&quot;
[1] &quot;Obtained 5700 out of 15901&quot;
[1] &quot;Obtained 5800 out of 15901&quot;
[1] &quot;Obtained 5900 out of 15901&quot;
[1] &quot;Obtained 6000 out of 15901&quot;
[1] &quot;Obtained 6100 out of 15901&quot;
[1] &quot;Obtained 6200 out of 15901&quot;
[1] &quot;Obtained 6300 out of 15901&quot;
[1] &quot;Obtained 6400 out of 15901&quot;
[1] &quot;Obtained 6500 out of 15901&quot;
[1] &quot;Obtained 6600 out of 15901&quot;
[1] &quot;Obtained 6700 out of 15901&quot;
[1] &quot;Obtained 6800 out of 15901&quot;
[1] &quot;Obtained 6900 out of 15901&quot;
[1] &quot;Obtained 7000 out of 15901&quot;
[1] &quot;Obtained 7100 out of 15901&quot;
[1] &quot;Obtained 7200 out of 15901&quot;
[1] &quot;Obtained 7300 out of 15901&quot;
[1] &quot;Obtained 7400 out of 15901&quot;
[1] &quot;Obtained 7500 out of 15901&quot;
[1] &quot;Obtained 7600 out of 15901&quot;
[1] &quot;Obtained 7700 out of 15901&quot;
[1] &quot;Obtained 7800 out of 15901&quot;
[1] &quot;Obtained 7900 out of 15901&quot;
[1] &quot;Obtained 8000 out of 15901&quot;
[1] &quot;Obtained 8100 out of 15901&quot;
[1] &quot;Obtained 8200 out of 15901&quot;
[1] &quot;Obtained 8300 out of 15901&quot;
[1] &quot;Obtained 8400 out of 15901&quot;
[1] &quot;Obtained 8500 out of 15901&quot;
[1] &quot;Obtained 8600 out of 15901&quot;
[1] &quot;Obtained 8700 out of 15901&quot;
[1] &quot;Obtained 8800 out of 15901&quot;
[1] &quot;Obtained 8900 out of 15901&quot;
[1] &quot;Obtained 9000 out of 15901&quot;
[1] &quot;Obtained 9100 out of 15901&quot;
[1] &quot;Obtained 9200 out of 15901&quot;
[1] &quot;Obtained 9300 out of 15901&quot;
[1] &quot;Obtained 9400 out of 15901&quot;
[1] &quot;Obtained 9500 out of 15901&quot;
[1] &quot;Obtained 9600 out of 15901&quot;
[1] &quot;Obtained 9700 out of 15901&quot;
[1] &quot;Obtained 9800 out of 15901&quot;
[1] &quot;Obtained 9900 out of 15901&quot;
[1] &quot;Obtained 10000 out of 15901&quot;
[1] &quot;Obtained 10100 out of 15901&quot;
[1] &quot;Obtained 10200 out of 15901&quot;
[1] &quot;Obtained 10300 out of 15901&quot;
[1] &quot;Obtained 10400 out of 15901&quot;
[1] &quot;Obtained 10500 out of 15901&quot;
[1] &quot;Obtained 10600 out of 15901&quot;
[1] &quot;Obtained 10700 out of 15901&quot;
[1] &quot;Obtained 10800 out of 15901&quot;
[1] &quot;Obtained 10900 out of 15901&quot;
[1] &quot;Obtained 11000 out of 15901&quot;
[1] &quot;Obtained 11100 out of 15901&quot;
[1] &quot;Obtained 11200 out of 15901&quot;
[1] &quot;Obtained 11300 out of 15901&quot;
[1] &quot;Obtained 11400 out of 15901&quot;
[1] &quot;Obtained 11500 out of 15901&quot;
[1] &quot;Obtained 11600 out of 15901&quot;
[1] &quot;Obtained 11700 out of 15901&quot;
[1] &quot;Obtained 11800 out of 15901&quot;
[1] &quot;Obtained 11900 out of 15901&quot;
[1] &quot;Obtained 12000 out of 15901&quot;
[1] &quot;Obtained 12100 out of 15901&quot;
[1] &quot;Obtained 12200 out of 15901&quot;
[1] &quot;Obtained 12300 out of 15901&quot;
[1] &quot;Obtained 12400 out of 15901&quot;
[1] &quot;Obtained 12500 out of 15901&quot;
[1] &quot;Obtained 12600 out of 15901&quot;
[1] &quot;Obtained 12700 out of 15901&quot;
[1] &quot;Obtained 12800 out of 15901&quot;
[1] &quot;Obtained 12900 out of 15901&quot;
[1] &quot;Obtained 13000 out of 15901&quot;
[1] &quot;Obtained 13100 out of 15901&quot;
[1] &quot;Obtained 13200 out of 15901&quot;
[1] &quot;Obtained 13300 out of 15901&quot;
[1] &quot;Obtained 13400 out of 15901&quot;
[1] &quot;Obtained 13500 out of 15901&quot;
[1] &quot;Obtained 13600 out of 15901&quot;
[1] &quot;Obtained 13700 out of 15901&quot;
[1] &quot;Obtained 13800 out of 15901&quot;
[1] &quot;Obtained 13900 out of 15901&quot;
[1] &quot;Obtained 14000 out of 15901&quot;
[1] &quot;Obtained 14100 out of 15901&quot;
[1] &quot;Obtained 14200 out of 15901&quot;
[1] &quot;Obtained 14300 out of 15901&quot;
[1] &quot;Obtained 14400 out of 15901&quot;
[1] &quot;Obtained 14500 out of 15901&quot;
[1] &quot;Obtained 14600 out of 15901&quot;
[1] &quot;Obtained 14700 out of 15901&quot;
[1] &quot;Obtained 14800 out of 15901&quot;
[1] &quot;Obtained 14900 out of 15901&quot;
[1] &quot;Obtained 15000 out of 15901&quot;
[1] &quot;Obtained 15100 out of 15901&quot;
[1] &quot;Obtained 15200 out of 15901&quot;
[1] &quot;Obtained 15300 out of 15901&quot;
[1] &quot;Obtained 15400 out of 15901&quot;
[1] &quot;Obtained 15500 out of 15901&quot;
[1] &quot;Obtained 15600 out of 15901&quot;
[1] &quot;Obtained 15700 out of 15901&quot;
[1] &quot;Obtained 15800 out of 15901&quot;
[1] &quot;Obtained 15900 out of 15901&quot;</code></pre>
</div>
<p>After importing the data, we need to check if there are any missing values in the <em>lat</em> and <em>lng</em> columns.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale</span> <span class='op'>&lt;-</span> <span class='va'>flat_resale</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>flat_resale</span><span class='op'>$</span><span class='va'>lat</span><span class='op'>)</span>,<span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Now that we have the <em>lat</em> and <em>lng</em> values have been added, we need to get the proximity of the apartments to the nearest facilities. In order to do so, we need to retrieve the data from the OneMap API.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>Now that our data has been cleaned, we can proceed to convert the aspatial data into a sf object.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat_resale.sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>flat_resale</span>,
                            coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lng"</span>, <span class='st'>"lat"</span><span class='op'>)</span>,
                            crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs<span class='op'>=</span><span class='fl'>3414</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>flat_resale.sf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Simple feature collection with 6 features and 12 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 28240.06 ymin: 38382.85 xmax: 30637.92 ymax: 39745.94
Projected CRS: SVY21 / Singapore TM
# A tibble: 6 x 13
  month  town  flat_type block street_name storey_range floor_area_sqm
  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;                 &lt;dbl&gt;
1 2019-~ ANG ~ 4 ROOM    204   ANG MO KIO~ 01 TO 03                 92
2 2019-~ ANG ~ 4 ROOM    175   ANG MO KIO~ 07 TO 09                 91
3 2019-~ ANG ~ 4 ROOM    543   ANG MO KIO~ 01 TO 03                 92
4 2019-~ ANG ~ 4 ROOM    118   ANG MO KIO~ 04 TO 06                 99
5 2019-~ ANG ~ 4 ROOM    411   ANG MO KIO~ 04 TO 06                 92
6 2019-~ ANG ~ 4 ROOM    546   ANG MO KIO~ 10 TO 12                 92
# ... with 6 more variables: flat_model &lt;chr&gt;,
#   lease_commence_date &lt;dbl&gt;, remaining_lease &lt;chr&gt;,
#   resale_price &lt;dbl&gt;, address &lt;chr&gt;, geometry &lt;POINT [m]&gt;</code></pre>
</div>
<h2 id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>We will look at 2 different types of factors: Structural and Locational. For Structural, we will be looking at <em>floor_area_sqm</em>, <em>storey_range</em>, <em>remaining_lease</em> and <em>flat_model</em>. For Locational, we will be looking at the proximity of the flats to childcare centres, MRT lines, CHAS centres, eldercare services and preschools.</p>
<p>Since we will be taking a look at these locational datasets. We will be importing as well.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>childcare</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/locational/childcare"</span>, layer <span class='op'>=</span> <span class='st'>"CHILDCARE"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `CHILDCARE&#39; from data source 
  `D:\sarahcsp\IS415_blog\_posts\2021-10-21-take-home-assignment-3\data\locational\childcare&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 1885 features and 1 field
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 11226.55 ymin: 25523.51 xmax: 44936.07 ymax: 49308.17
Projected CRS: SVY21 / Singapore TM</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mrt</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/locational/mrt"</span>, layer <span class='op'>=</span> <span class='st'>"MRTLRTStnPtt"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `MRTLRTStnPtt&#39; from data source 
  `D:\sarahcsp\IS415_blog\_posts\2021-10-21-take-home-assignment-3\data\locational\mrt&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 185 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 6138.311 ymin: 27555.06 xmax: 45254.86 ymax: 47854.2
Projected CRS: SVY21</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>CHAS</span> <span class='op'>&lt;-</span> <span class='fu'>read_rds</span><span class='op'>(</span><span class='st'>"data/locational/chas/CHAS.rds"</span><span class='op'>)</span>
<span class='va'>CHAS</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>CHAS</span>, 
                 coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"X_COORDINATE"</span>,<span class='st'>"Y_COORDINATE"</span><span class='op'>)</span>, 
                 crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>
<span class='va'>eldercare</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/locational/eldercare"</span>, layer <span class='op'>=</span> <span class='st'>"ELDERCARE"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `ELDERCARE&#39; from data source 
  `D:\sarahcsp\IS415_blog\_posts\2021-10-21-take-home-assignment-3\data\locational\eldercare&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 133 features and 18 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9
Projected CRS: SVY21</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>preschools</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span><span class='st'>"data/locational/preschools/pre-schools-location-kml.kml"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `PRESCHOOLS_LOCATION&#39; from data source 
  `D:\sarahcsp\IS415_blog\_posts\2021-10-21-take-home-assignment-3\data\locational\preschools\pre-schools-location-kml.kml&#39; 
  using driver `KML&#39;
Simple feature collection with 1925 features and 2 fields
Geometry type: POINT
Dimension:     XYZ
Bounding box:  xmin: 103.6824 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84</code></pre>
</div>
<p>Before doing any proper analysis, we can plot histograms to have a clearer idea of the variables we will be looking at. We will use the following code to do so:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>AREA_SQM</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot</span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>flat_resale.sf</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span> <span class='va'>`floor_area_sqm`</span><span class='op'>)</span>, stat<span class='op'>=</span><span class='st'>'count'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_histogram</span><span class='op'>(</span>bins<span class='op'>=</span><span class='fl'>20</span>, color<span class='op'>=</span><span class='st'>"black"</span>, fill<span class='op'>=</span><span class='st'>"light blue"</span><span class='op'>)</span>

<span class='va'>STOREY_RANGE</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot</span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>flat_resale.sf</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>storey_range</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_bar</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>LEASE</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot</span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>flat_resale.sf</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span> <span class='va'>`remaining_lease`</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_bar</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>FLAT_MODEL</span> <span class='op'>&lt;-</span> <span class='fu'>ggplot</span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>flat_resale.sf</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span> <span class='va'>`flat_model`</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_bar</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>ggarrange</span><span class='op'>(</span><span class='va'>AREA_SQM</span>, <span class='va'>STOREY_RANGE</span>, <span class='va'>LEASE</span>, <span class='va'>FLAT_MODEL</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>theme</span><span class='op'>(</span>axis.text.x <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-assignment-3_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<h1 id="hedonic-pricing-model">4. Hedonic Pricing Model</h1>
<h2 id="simple-linear-regression-model">Simple Linear Regression Model</h2>
<p>We will first built a simple linear regression model using <em><em>resale_price</em></em> as the dependent variable and <em><em>floor_area_sqm</em></em> as the independent variable.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flat.slr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span>formula<span class='op'>=</span><span class='va'>resale_price</span> <span class='op'>~</span> <span class='va'>floor_area_sqm</span>, data <span class='op'>=</span> <span class='va'>flat_resale.sf</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We will now look at the summary.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>flat.slr</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
Call:
lm(formula = resale_price ~ floor_area_sqm, data = flat_resale.sf)

Residuals:
    Min      1Q  Median      3Q     Max 
-220731  -79719  -28719   36281  751160 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    528807.6    12801.5   41.31  &lt; 2e-16 ***
floor_area_sqm  -1000.9      134.2   -7.46 9.09e-14 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 120000 on 15873 degrees of freedom
Multiple R-squared:  0.003494,  Adjusted R-squared:  0.003431 
F-statistic: 55.65 on 1 and 15873 DF,  p-value: 9.087e-14</code></pre>
</div>
<p>To visualise the best fit curve on a scatterplot, we can incorporate lm() as a method function in ggplot’s geometry as shown in the code chunk below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>ggplot</span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>flat_resale.sf</span>,  
       <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>`floor_area_sqm`</span>, y<span class='op'>=</span><span class='va'>`resale_price`</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='va'>lm</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-assignment-3_files/figure-html5/unnamed-chunk-17-1.png" width="624" /></p>
</div>
<p>Since p-value is much bigger than 0.0001, we will reject the alternative hypothesis that mean is a good estimator of <em>resale_price</em>. This will allow us to infer that simple linear regression model above is not a good estimator of <em>resale_price</em>.</p>
<h2 id="multiple-linear-regression-model">Multiple Linear Regression Model</h2>
<p>Since our dataset does not contain a lot of numerical data, such as proximity to different locations, we would have to derive the shortest distance of the HDB resale units to the different amenities. To do so, we first need to find the distance between the HDB points and the amenities point.</p>
<p><em><em>Childcare Centres</em></em></p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#corrplot(cor(flat_resale[, 5:13]), diag = FALSE, order = "AOE",</span>
<span class='co'>#         tl.pos = "td", tl.cex = 0.5, method = "number", type = "upper")</span>
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
